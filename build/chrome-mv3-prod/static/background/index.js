var e,o;"function"==typeof(e=globalThis.define)&&(o=e,e=null),function(o,n,t,r,i){var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l="function"==typeof c[r]&&c[r],s=l.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(e,n){if(!s[e]){if(!o[e]){var t="function"==typeof c[r]&&c[r];if(!n&&t)return t(e,!0);if(l)return l(e,!0);if(a&&"string"==typeof e)return a(e);var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}f.resolve=function(n){var t=o[e][1][n];return null!=t?t:n},f.cache={};var u=s[e]=new d.Module(e);o[e][0].call(u.exports,f,u,u.exports,this)}return s[e].exports;function f(e){var o=f.resolve(e);return!1===o?{}:d(o)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=o,d.cache=s,d.parent=l,d.register=function(e,n){o[e]=[function(e,o){o.exports=n},{}]},Object.defineProperty(d,"root",{get:function(){return c[r]}}),c[r]=d;for(var u=0;u<n.length;u++)d(n[u]);if(t){var f=d(t);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):i&&(this[i]=f)}}({kgW6q:[function(e,o,n){e("../../../src/background/index")},{"../../../src/background/index":"iqY5N"}],iqY5N:[function(e,o,n){console.log("[BACKGROUND] Background script loaded and running"),chrome.runtime.onMessage.addListener((e,o,n)=>{console.log("[BACKGROUND] Received message:",e),console.log("[BACKGROUND] Message sender tab url:",o.tab?.url),console.log("[BACKGROUND] Message sender:",o),"extractEmailData"===e.action?(console.log("[BACKGROUND] Attempting to get active tab"),chrome.tabs.query({active:!0,currentWindow:!0},async e=>{let o=e[0];if(!o?.id){console.error("[BACKGROUND] No active tab found");return}if(console.log("[BACKGROUND] Active tab found:",o),!o.url?.includes("mail.google.com")){console.error("[BACKGROUND] Not a Gmail page:",o.url);return}let n=!1;for(let e of["/contents/index.js","contents/index.js","/src/contents/index.js","src/contents/index.js","/dist/contents/index.js","dist/contents/index.js"])try{console.log("[BACKGROUND] Attempting to execute script from path:",e),await chrome.scripting.executeScript({target:{tabId:o.id},files:[e]}),console.log("[BACKGROUND] Content script executed successfully from path:",e),n=!0;break}catch(o){console.error(`[BACKGROUND] Failed to execute script from path ${e}:`,o)}if(!n){console.error("[BACKGROUND] Failed to execute content script from any path");try{console.log("[BACKGROUND] Attempting inline script injection"),await chrome.scripting.executeScript({target:{tabId:o.id},func:()=>{console.log("[CONTENT] Inline script executing"),(()=>{let e="",o="",n="",t=document.querySelector(".gD");t&&(e=t.getAttribute("email")||t.textContent||"");let r=document.querySelector("h2.hP");r&&(o=r.textContent||"");let i=document.querySelector(".a3s");i&&(n=i.textContent||""),(e||o||n)&&chrome.runtime.sendMessage({sender:e,subject:o,body:n})})()}}),console.log("[BACKGROUND] Inline script injection successful")}catch(e){console.error("[BACKGROUND] Inline script injection failed:",e)}}})):(e.sender||e.subject||e.body)&&(console.log("[BACKGROUND] Relaying email data to UI:",e),chrome.runtime.sendMessage(e).catch(e=>{console.error("[BACKGROUND] Error relaying message to UI:",e)}))}),console.log("[PANEL] Setting up side panel behavior..."),chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(e=>console.error("[PANEL] Error setting panel behavior:",e)),chrome.action.onClicked.addListener(e=>{console.log("[CLICK] Extension icon clicked, tab:",e),e.windowId?(console.log("[CLICK] Opening side panel for window:",e.windowId),chrome.sidePanel.open({windowId:e.windowId}).catch(e=>console.error("[CLICK] Error opening side panel:",e))):console.error("[CLICK] No window ID found for tab:",e)})},{}]},["kgW6q"],"kgW6q","parcelRequire9b94"),globalThis.define=o;